(this.webpackJsonpsendsay=this.webpackJsonpsendsay||[]).push([[0],{55:function(e,t){e.exports="data:image/png;base64,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"},71:function(e,t,n){e.exports=n(84)},76:function(e,t,n){},81:function(e,t,n){},84:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(21),c=n.n(o),s=(n(76),n(15)),i=n(105),l=n(64),u=n(61),d=n.n(u),m=n(62),g=n.n(m),f=n(63),b=(n(81),n(28)),p=function(e){return e.split("").reduce((function(e,t){return(e=(e<<5)-e+t.charCodeAt(0))&e}),0)},h=Object(b.b)({screen:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"LOGIN",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SCREEN":return t.screen;default:return e}},api:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SENDSAY":return t.sendsay;default:return e}},requestHistory:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{asc:!0,history:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_REQUEST":var n=e.asc,r=e.history,a=JSON.stringify(t.request),o=p(a),c=r.findIndex((function(e){return o===e.hash})),s={request:a,hasError:t.hasError,hash:o},i=n&&c>=0||!n&&-1===c,l=r.reduce((function(e,t,n){return c!==n&&e.push(t),e}),i?[s]:[]);return i||l.push(s),{asc:n,history:l};default:return e}}}),E=Object(b.c)(h),y=n(6),v=n(9),O=n(98),j=n(58),A=n(108),S=n(99),C=n(100),w=n(107),k=n(101),x=n(102),N=n(103),R=n(55),I=n.n(R),q=Object(O.a)((function(e){return{root:{}}})),B=function(){var e=q();return a.a.createElement("div",{className:e.root},a.a.createElement("img",{className:e.logoImg,src:I.a,alt:"Logo"}))},J=n(26),T=n.n(J),z=n(57),L=n(30),Q=new(function(){function e(){Object(z.a)(this,e)}return Object(L.a)(e,[{key:"login0",value:function(e){var t=this,n=e.login,r=e.sublogin,a=e.password;return this.sendsay=new T.a({auth:{login:n,sublogin:r,password:a}}),this.sendsay.request({action:"sys.settings.get",list:["about.id"]}).then((function(e){return console.log("login() res=",e),console.log(document.cookie),{aboutId:e.list["about.id"]}})).catch((function(e){return console.error("At api login request(): ",e),t.sendsay=!1,{errorObj:e}}))}},{key:"setCookie",value:function(e,t,n){var r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3);var a="expires="+r.toUTCString();document.cookie=e+"="+t+";"+a+";path=/"}},{key:"login",value:function(e){var t=this,n=e.login,r=e.sublogin,a=e.password;return this.sendsay=new T.a,this.sendsay.login({login:n,sublogin:r,password:a}).then((function(e){return console.log("AFTER LOGIN sendsay=",t.sendsay),console.log("login() res=",e),t.setCookie("sendsay_session",t.sendsay.session,1),console.log(document.cookie),"login OK"})).catch((function(e){return console.error("At api login request(): ",e),t.sendsay=!1,{errorObj:e}}))}},{key:"getSendsay",value:function(){if(this.sendsay)return this.sendsay;var e=new T.a;return e.setSessionFromCookie(),console.log("getSendsay() sendsay=",e),e}},{key:"test",value:function(){var e=this.getSendsay();return e?(this.sendsay=e,this.request({action:"sys.settings.get",list:["about.id"]}).then((function(e){return console.log("test.res = ",e),e}))):Promise.reject(new Error("\u041d\u0435\u0442 \u0441\u0435\u0441\u0441\u0438\u0438"))}},{key:"pong",value:function(){var e=this.getSendsay();return e?(this.sendsay=e,this.request({action:"pong"}).then((function(e){return console.log("pong.res = ",e),{account:e.account,sublogin:e.sublogin}}))):Promise.reject(new Error("\u041d\u0435\u0442 \u0441\u0435\u0441\u0441\u0438\u0438"))}},{key:"request",value:function(e){return this.sendsay.request(e).then((function(e){return console.log("sendsay.request() res=",e),e})).catch((function(e){return console.error("At api request request(): ",e),{errorObj:e}}))}}]),e}()),D={login:"serggin1@yandex.ru",password:"gi6Nungoo"},V=function(e,t){return{type:"ADD_REQUEST",request:e,hasError:t}},P=Object(O.a)((function(e){return{root:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",height:"100%"},wrapper:{display:"flex",flexDirection:"column",alignItems:"center",maxWidth:360},paper:{padding:20},loginInput:{marginBottom:10,width:"100%"},loginInputHelper:{position:"absolute",top:0,right:0,lineHeight:1},button:{textTransform:"none"},error:{padding:10,color:e.palette.error.main,backgroundColor:Object(j.fade)(e.palette.error.main,.1),whiteSpace:"pre-line"}}})),G=function(e){var t=e.label,n=e.type,r=void 0===n?"text":n,o=e.value,c=e.onChange,s=e.helper,i=e.error,l=P();return a.a.createElement(A.a,{className:l.loginInput},a.a.createElement(S.a,null,t),a.a.createElement(C.a,{className:l.loginInputHelper},s),a.a.createElement(w.a,{fullWidth:!0,type:r,value:o,onChange:c,error:i}))},F=function(e){var t=P(),n=Object(r.useState)(""),o=Object(v.a)(n,2),c=o[0],i=o[1],l=Object(r.useState)(""),u=Object(v.a)(l,2),d=u[0],m=u[1],g=Object(r.useState)(""),f=Object(v.a)(g,2),b=f[0],p=f[1],h=Object(r.useState)(!1),E=Object(v.a)(h,2),y=E[0],O=E[1],j=Object(r.useState)(!1),A=Object(v.a)(j,2),S=A[0],C=A[1],w=Object(r.useState)(""),R=Object(v.a)(w,2),I=R[0],q=R[1];Object(s.b)();return Object(r.useEffect)((function(){q("")}),[c,d,b]),Object(r.useEffect)((function(){console.log(document.cookie);i(D.login),p(D.password),q("")}),[]),a.a.createElement("div",{className:t.root},a.a.createElement("div",{className:t.wrapper},a.a.createElement(B,null),a.a.createElement(k.a,{className:t.paper},a.a.createElement(x.a,{variant:"h5",gutterBottom:!0},"API-\u043a\u043e\u043d\u0441\u043e\u043b\u044c\u043a\u0430"),I&&a.a.createElement("div",{className:t.error},I),a.a.createElement(G,{label:"\u041b\u043e\u0433\u0438\u043d",value:c,error:y,onChange:function(e){return function(e){var t=e.trim();t!==c&&(i(t),O(!1))}(e.target.value)}}),a.a.createElement(G,{label:"\u0421\u0443\u0431\u043b\u043e\u0433\u0438\u043d",helper:"\u043e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e",value:d,onChange:function(e){return function(e){var t=e.trim();t!==c&&m(t)}(e.target.value)}}),a.a.createElement(G,{label:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",value:b,error:S,onChange:function(e){return function(e){var t=e.trim();t!==b&&(p(t),C(!1))}(e.target.value)}}),a.a.createElement(N.a,{variant:"contained",color:"primary",className:t.button,onClick:function(){c&&b?Q.login({login:c,sublogin:d,password:b}).then((function(t){console.log("loginApi() result=",t),console.log(document.cookie);var n=t.errorObj;n?q("\u0412\u0445\u043e\u0434 \u043d\u0435 \u0432\u044b\u0448\u0435\u043b \f\n            ".concat(JSON.stringify(n),"\n            ")):e.history.push("/console")})):(c||O(!0),b||C(!0),q('\u041f\u043e\u043b\u044f "\u041b\u043e\u0433\u0438\u043d" \u0438 "\u041f\u0430\u0440\u043e\u043b\u044c" \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!'))}},"\u0412\u043e\u0439\u0442\u0438"))))},K=n(104),W=n(44),U=n.n(W),H=n(59),Z=n.n(H),X=n(106),Y=Object(O.a)((function(e){return{root:{display:"flex",justifyContent:"space-between",backgroundColor:"#eee"},leftGroup:{display:"flex",alignItems:"center",justifyContent:"space-between",width:280},rightGroup:{display:"flex",alignItems:"center",justifyContent:"space-between",width:350},account:{padding:10},exitButton:{textTransform:"none"}}})),M=function(){var e=Y(),t=Object(r.useState)(""),n=Object(v.a)(t,2),o=n[0],c=n[1],s=Object(r.useState)(""),i=Object(v.a)(s,2),l=i[0],u=i[1];return Object(r.useEffect)((function(){Q.pong().then((function(e){c(e.account),e.account!==e.sublogin&&u(e.sublogin)}))}),[]),a.a.createElement(X.a,{className:e.account,border:1,borderRadius:"borderRadius",borderColor:"grey.400"},o,l&&" : "+l)},_=function(){return a.a.createElement(N.a,{className:"exitButton",color:"default",endIcon:a.a.createElement(Z.a,null)},"\u0412\u044b\u0439\u0442\u0438")},$=function(){return a.a.createElement(K.a,null,a.a.createElement(U.a,null))},ee=function(){var e=Y();return a.a.createElement("div",{className:e.root},a.a.createElement("div",{className:e.leftGroup},a.a.createElement(B,null),a.a.createElement(x.a,{variant:"h6"},"API-\u043a\u043e\u043d\u0441\u043e\u043b\u044c\u043a\u0430")),a.a.createElement("div",{className:e.rightGroup},a.a.createElement(M,null),a.a.createElement(_,null),a.a.createElement($,null)))},te=n(45),ne=n.n(te),re=Object(O.a)((function(e){return{root:{padding:5,paddingLeft:10,marginRight:10,backgroundColor:"white",borderRadius:5},circle:{display:"inline-block",width:10,height:10,marginRight:5,borderRadius:"50%",backgroundColor:"green"},circleError:{backgroundColor:"red"},button:{padding:0}}})),ae=function(e){var t=e.hasError,n=re(),r="".concat(n.circle," ").concat(t?n.circleError:"");return a.a.createElement("div",{className:r})},oe=function(){var e=re();return a.a.createElement(K.a,{className:e.button},a.a.createElement(ne.a,null))},ce=function(e){var t=e.hasError,n=e.action,r=(e.key,re());return a.a.createElement("div",{className:r.root},a.a.createElement(ae,{hasError:t}),a.a.createElement("span",null,n),a.a.createElement(oe,null))},se=Object(O.a)((function(e){return{root:{display:"flex",flexBasis:54,alignItems:"center",paddingLeft:10,paddingTop:5,paddingBottom:5,backgroundColor:e.palette.grey[200],borderWidth:1,borderColor:e.palette.grey[400],borderStyle:"solid",borderLeftStyle:"none",borderRightStyle:"none"}}})),ie=function(e){var t=se(),n=Object(s.c)((function(e){return e.requestHistory})),r=function(e,t){};return a.a.createElement("div",{className:t.root},n.history.map((function(e){var t=JSON.parse(e.request).action;return a.a.createElement(ce,{hasError:e.hasError,action:t,key:e.hash,onItemCommand:r})})))},le=n(65),ue=Object(O.a)((function(e){return{root:{width:"100%",height:"100%",padding:10,boxSizing:"border-box"},jsonPanel:{display:"flex",flexDirection:"column",height:"100%"},textarea:{resize:"none",width:"100%",height:"100%",boxSizing:"border-box"},textareaError:{borderStyle:"solid",borderColor:"red"},split:{height:"100%",display:"flex"},gutter:{width:10,backgroundColor:"green"}}})),de=function(e){var t=e.label,n=e.editable,o=void 0===n||n,c=e.panelValue,s=e.onChange,i=e.hasError,l=ue(),u=Object(r.useState)(""),d=Object(v.a)(u,2),m=d[0],g=d[1];Object(r.useEffect)((function(){g(c)}),[c]);var f=function(e){g(e),s&&s(e)},b="".concat(l.textarea," ").concat(i?l.textareaError:"");return a.a.createElement("div",{className:l.jsonPanel},a.a.createElement(x.a,{variant:"subtitle1"},t," :"),a.a.createElement("textarea",{className:b,readOnly:!o,value:m,onChange:function(e){return f(e.target.value)}}))},me=function(e){var t=e.onChange,n=e.request,r=e.response,o=e.invalidRequest,c=e.errorResponse,s=ue();return a.a.createElement("div",{className:s.root},a.a.createElement(le.a,{className:s.split,sizes:[50,50],minSize:100,expandToMin:!1,gutterSize:10,gutterAlign:"center",snapOffset:30,dragInterval:1,direction:"horizontal",cursor:"col-resize"},a.a.createElement(de,{label:"\u0417\u0430\u043f\u0440\u043e\u0441",panelValue:n,onChange:function(e){t(e)},hasError:o}),a.a.createElement(de,{label:"\u041e\u0442\u0432\u0435\u0442",editable:!1,panelValue:r,hasError:c})))},ge=n(60),fe=n.n(ge),be=Object(O.a)((function(e){return{root:{display:"flex",justifyContent:"space-between",backgroundColor:"white",borderWidth:1,borderColor:e.palette.grey[400],borderStyle:"solid",borderLeftStyle:"none",borderRightStyle:"none",padding:10},sendButton:{textTransform:"none"},formatButton:{textTransform:"none"}}})),pe=function(e){var t=e.hasRequest,n=e.onSend,r=e.onFormat,o=be();return a.a.createElement("div",{className:o.root},a.a.createElement(N.a,{variant:"contained",color:"primary",className:o.sendButton,onClick:n,disabled:!t},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"),a.a.createElement(N.a,{className:o.formatButton,color:"primary",startIcon:a.a.createElement(fe.a,{color:"primary"}),onClick:r,disabled:!t},"\u0424\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"))},he=Object(O.a)((function(e){return{root:{display:"flex",flexDirection:"column",height:"100%",minWidth:650}}})),Ee=function(){var e,t=he(),n=Object(s.b)();try{e=JSON.stringify({action:"sys.settings.get",list:["about.id"]})}catch(N){console.error(N.message),e=""}var o=Object(r.useState)(e),c=Object(v.a)(o,2),i=c[0],l=c[1],u=Object(r.useState)(e),d=Object(v.a)(u,2),m=d[0],g=d[1],f=Object(r.useState)(""),b=Object(v.a)(f,2),p=b[0],h=b[1],E=Object(r.useState)(!1),y=Object(v.a)(E,2),O=y[0],j=y[1],A=Object(r.useState)(!1),S=Object(v.a)(A,2),C=S[0],w=S[1],k=function(e){try{return JSON.parse(e)}catch(N){return console.error(N.message),!1}},x=function(e){try{var t=JSON.parse(e);return JSON.stringify(t,null,4)}catch(N){return console.error(N.message),!1}};return a.a.createElement("div",{className:t.root},a.a.createElement(ee,null),a.a.createElement(ie,{onCommand:function(e,t){}}),a.a.createElement(me,{request:i,response:p,onChange:function(e){g(e),j(!1)},invalidRequest:O,errorResponse:C}),a.a.createElement(pe,{hasRequest:!!i,onSend:function(){var e=k(m);e?Q.request(e).then((function(t){console.log("onSend() res=",t);var r,a=t.errorObj,o=!1;if(a)if("object"===typeof a)try{r=JSON.stringify(a,null,4),n(V(e,!0)),o=!0}catch(N){r=N.message,console.error(N.message)}else r=a;else try{r=JSON.stringify(t,null,4),n(V(e,!1))}catch(N){r=N.message,console.error(N.message),o=!0}h(r),o&&w(!0)})).catch((function(e){})):j(!0)},onFormat:function(){var e=x(m);e?(l(e),g(e)):j(!0)}}))},ye=function(){var e=Object(s.c)((function(e){return e.screen}));return console.log("screen=",e),a.a.createElement(a.a.Fragment,null,a.a.createElement(y.a,{exact:!0,path:"/",component:F}),a.a.createElement(y.a,{path:"/console",component:Ee}))},ve=Object(l.a)({palette:{primary:d.a,secondary:g.a}});var Oe=function(){return a.a.createElement(f.a,null,a.a.createElement(s.a,{store:E},a.a.createElement(i.a,{theme:ve},a.a.createElement("div",{className:"sendsay-app"},a.a.createElement(ye,null)))))};c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(Oe,null)),document.getElementById("root"))}},[[71,1,2]]]);
//# sourceMappingURL=main.d0b18ab8.chunk.js.map